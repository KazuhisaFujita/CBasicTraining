
## 第4回 じゃんけんプログラムの作成

### 目的

じゃんけんのプログラムを作成を通し，これまで習ったC言語の知識の復習をする．

### じゃんけんプログラム

じゃんけんとは，２人不完全情報ゲームの一つである．じゃんけんは，２人のプレーヤーがグー，チョキ，パーのいずれかの手を同時に出し，グーとチョキが出た場合はグーを出したプレーヤが，チョキとパーが出た場合はチョキを出したプレーヤが，パーとグーが出た場合はパーを出したプレーヤが勝利するゲームである．

本実験では，このゲームをC言語プログラムで実装する．このゲームをプログラム上で実現する場合は，プレーヤの手を数値で表現する必要がある．今回は，グー，チョキ，パーそれぞれの0，1．2の数値で表すことにする．これを踏まえ，作られたじゃんけんプログラムをリストに示す．

```c
#include <stdio.h>

int main(void)
{
    int my_card = 0;
    int enemy_card = 0;

    scanf("%d", &my_card);
    scanf("%d", &enemy_card);

    if(my_card == enemy_card){
        printf("引き分け\n");
    }else if(my_card == 0 && enemy_card == 1){
        printf("勝ち\n");
    }else if(my_card == 1 && enemy_card == 2){
        printf("勝ち\n");        
    }else if(my_card == 2 && enemy_card == 0){
        printf("勝ち\n");        
    }else{
        printf("負け\n");
    }

    return(0);
}
```

ここではじめて，キーボードからの入力を行う関数scanfを使う．

```c
scanf("変数指定子", &変数名);
```

| 変換指定子  | 意味 |
|:-----:|:------------:|
| %c | 1文字出力する|
| %s | 文字列を出力する|
| %d | 整数を10進数で出力する|
| %o | 整数を8進数で出力する|
| %x | 整数を16進数で出力する|
| %f | -dddd.ddddddの形式で出力する|

scanfの動作は今の君たちには理解が難しいため，呪文だと思って使ってほしい．

__課題4.1__ このプログラムのフローチャートをかけ．

__発展__ この実験ではじゃんけんの勝敗条件を愚直に記述してあるため，ソースコードが長くなっている，より短く記述することも可能である．余裕が有る場合は，コードを短くする工夫をしてみよう．

### 乱数を使ったじゃんけんプログラム

先ほどのじゃんけんプログラムは，2人のプレイヤーの手を入力する必要があるため，1人で遊べるプログラムにはなっていない．一人で遊べるようにするためには，一人のプレーヤーの手をコンピュータが選ぶように変更する必要がある．コンピュータがプレーヤーの手を決めるときによく用いられるのが乱数である．乱数とは，ある確率に従って生成される数のことである．多くのプログラミングの書籍で乱数と書いてある場合は，すべての数が等しい確率で出現する乱数(一様乱数)のことを示す場合がほとんどである．

乱数を使ったC言語のサンプルプログラムを次に示す．

```c
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
	printf("%d\n", rand()%3);
}
```

乱数のサンプルプログラムでは，乱数を組み込み関数であるrand()で生成している．rand()は，0からまでの整数のうち1つを返す関数である．それぞれの出現確率は同じ確率である．この関数を使うためには，まずstdlib.hをインクルードする必要がある．

乱数のサンプルプログラムを実行すると，0から2までの数値しか表示されない．これは，rand()関数で生成した整数を3で割った余り(剰余)を表示しているからである．このように，剰余を使えば任意の範囲の整数の乱数を生成できる．

__発展__ 組み込み関数のrand()は実は正確な乱数ではなく出て来る数値が決まっており，学術的には使えない場合がある．興味があれば調べてみよう．

__課題4.2__ 先ほど作成したじゃんけんプログラムのplayer2の手を乱数で決め，人間とコンピュータがじゃんけんをするプログラムに書き換えよ．そして，そのプログラムを印刷して提出せよ．

### 無限ループとbreak文

無限ループとは，名前の通り無限にループを繰り返す処理のことである．しかし，プログラムは必ず停止しなければならないため，無限ループを抜ける適切な条件分が必ず必要となる．ループを強制的に抜けるための命令がbrake文である．では，次の無限ループとbrake文を使った例を見てみよう．

```c
for(;;){
    処理
    if(条件){
        break;
    }
}
```

このプログラムは，条件が真となった場合brake文が実行され，ループをぬけるように作られている．

__課題4.3__ 人間がコンピュータに勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__課題4.4__ 人間がコンピュータに3回勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__課題4.5__ 三回勝負を10回行い，人間及びコンピュータの勝率を表示するプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__注__ サンプルコードと課題のプログラムは，無限ループとbrake文を使わなくても実装できる．余裕がある人は考えてみよう．
