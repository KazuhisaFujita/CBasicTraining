# 情報システム系実験II

### 本実験の目的

本実験を通し，C言語の基礎的なコーディングの仕方とフローチャートを通しプログラミングで必要な論理的な思考を身につけることを目標とする．

### 注意

* 必ず筆記用具，実験書，プログラミング(C言語)の教科書を持ってくること．
* 発展と書いてある問題は，時間がある場合取り組む．

## 第0回 コーディングに対する全体的な注意

プログラミングは最も重要なのは，読みやすい可読性の高いコードを書くことです．
可読性を高めるために次のようなことを注意してプログラミングしましょう．

* コメントを書く．
* インデントをする．
* マジックナンバーをなくす．
* 変数名，関数名，クラス名などを分かりやすいものにする(命名規則にあわせる)．
* 分かりやすい表現(処理)を使う．
* コードを機能別に関数，クラス，ファイル等に分ける．

## 第1回 四則演算と変数の型

### 目的

プログラミングでは扱うデータに種類がある．それぞれの特徴を知らなければ，正確に動作するプログラムは作れない．本課題では，簡単な四則演算と変数の型について理解を深めることを目的とする．

### 変数の種類

変数とは，プログラム内で数値や文字を保存するための入れ物である．変数にはいくつかの種類がある．C言語で扱う変数は大きく整数型，浮動小数型，文字型の3種類である．整数型の変数には整数を，浮動小数型の変数には自然数を，文字型には文字を格納することができる．プログラミングでは，これらの変数型を用途に応じ適切に使い分ける必要がある．初心者である諸君は，まず，整数型int，浮動小数型double，文字型charの3種類を覚えておこう．C言語で用いることができる変数型の一部を表に示す．int，double，char以外にも型があることを知っておこう．

__注__ char型は整数型でもある．また，int，longなど環境によって使える桁数が変わる変数型がある．

| データ型 | データ型の名称  |
|:-------:|:------------:|
|char     | 符号付き8bit整数型|
|short    | 符号付き短整数型|
|int      | 符号付き整数型|
|long int | 符号付き長整数型|
|long long| 符号付き長長整数型|
|float    | 単精度実浮動小数点型|
|double   | 倍精度実浮動小数点型|
|char     | 符号付き文字型|

変数a，b，c，d, eをそれぞれchar型，int型，int型，double型，double型で宣言した例を示す．宣言は
```c
データ型 変数名;
```
で行う．同じ型の変数を宣言するときは"int b, c;"のように一行に書くことができる．また，変数を宣言すると同時に初期化したい場合も，"double e = 2.7;"のように一行で書くことができる．

```c
/*宣言*/
char a;
int b, c;
double d;
double e = 2.7;

/*変数に文字もしくは数を入れる。*/
a = 'X';
b = 10;
c = 100;
d = 1.1;
```

__課題1.1__ 次の問に答えよ．

1. 数値の上限が127の整数型変数を作る場合，どの型を用いればよいか答えよ．そしてその理由を答えよ．
2. 文字列を扱う場合，どの型を用いればよいか答えよ．
3. 最も精度が高い(使える桁数が多い)加減乗除を行いたい場合，どの型を用いればよいか答えよ．
4. 最も長い桁を表現できる整数型はどれか答えよ．

### printfの表示

C言語では画面にデータを表示する場合，よくprintfが用いられる．printfの使い方は次のとおりである．

```c
printf("変換指定子 ", 変数);
```
printf関数は"(ダブルクォーテーション)でくくられた部分が画面に表示される．そして，変数と書かれた部分に表示したい変数を書くと表示される．ただし，変数に対応した変数指定しをダブルクォーテーション内に書く必要がある．また，変数の部分は省略することができる．次に使用例を示す．

<<<<<<< HEAD
```c
/*リスト*/
#include <stdio.h>
int main()
{
    int i = 16;
    double f = 3.14;
    char c1 = 'A';
    char *c2 = "Hello"

    printf("printfの使い方\n");

    /*変数の表示*/
    printf("整数 %d\n", i);
    printf("浮動小数 %f\n", f);
    printf("文字 %c\n", c1);
    printf("整数 %d\n", c1);
    printf("文字列 %s\n", c2);
    printf("8進数 %s\n", i);
    printf("16進数 %x\n", i);

    /*変数と変数指定子が異なった場合*/
    printf("整数 %f\n", i);
    printf("浮動小数 %d\n", f); 
}
```

__注__ /*コメント*/はコメントと呼ばれ，/* */で囲まれた部分は実行されない．そのため，ソースコードの注意事項やメモ，もしくは一時的に無効にしたいコードを/* */の中身に書く．

__注__ 環境により\(バックスラッシュ)が￥(円マーク)として表示される(扱われる)場合がある．ただし，\と￥を区別する(別の文字として扱われる)環境もあるので注意が必要である．詳しく知りたい人は，円マークと文字コードの関係を調べてみるとよい．

このサンプルを見ると2つほど見慣れない表現が使われている．一つは%を使ったもの，もう一つは\(バックスラッシュ)を用いたものである．%を用いたものは，指定子とよばれ，変数の中身を表示するために使われる．例えば，サンプルプログラムで用いられているprintf("整数 %d\n", i)の%dはダブルクォーテーションの外の整数型の変数iの中身を表示するために用いられる．printfで変数の中身を表示するとき，その変数の型に対応した変換指定子を用いないと適切に表示されない．

| 変換指定子  | 意味 |
|:-----:|:------------:|
=======
|   指定子  | 意味 |
|:-----------:|:------------:|
>>>>>>> origin/master
| %c | 1文字出力する|
| %s | 文字列を出力する|
| %d | 整数を10進数で出力する|
| %o | 整数を8進数で出力する|
| %x | 整数を16進数で出力する|
| %f | -dddd.ddddddの形式で出力する|

|   エスケープシーケンス  | 意味 |
<<<<<<< HEAD
|:---:|:----------:|
=======
|:-----------:|:------------:|
>>>>>>> origin/master
| \n | 改行を表示する|
| \t | タブを表示する|
| \a | 警報音|

__課題1.3__ サンプルプログラムを実行し，表示結果を答えよ．表示結果のなかで表示された数値が無意味なものを挙げ，なぜに無意味な表示がされたのか答えよ．

### 四則演算

ここでは，C言語で四則演算を行うための演算子を学ぶ．プログラムで四則演算を行うために用いる文字（メタ文字）のことを算術演算子と呼ぶ．主に使う算術演算子を表に示す．加減乗除は，算数でよく使うため諸君は理解できると思うが，剰余算は初めて見るかもしれない．剰余算とは，整数を整数で割った時の余りを計算することである．プログラミングでは剰余算はよく使うので理解しておこう．演算子を用いたサンプルコードをリストに表示する．

|演算子|  意味  |
|:---:|:-----:|
|  +  | 加算   |
|  -  | 減算   |
|  *  | 乗算   |
|  /  | 除算   |
|  %  | 剰余算 |

```c
/*リスト*/
<<<<<<< HEAD
#include<stdio.h>
int main()
{
    double x, y, z;
    x = 1.0;
    y = 2.0;
    z = x/y;
    printf("%f\n", z);
}
```

サンプルコードでは，1/2=0.5のように我々が習ってきた算数と相違ない結果が表示された．実は，算数と同じ結果が出たのは変数型を適切に用いたからである．次のリストに，適切に計算出来ないソースコードを示す．課題を行い，理解して欲しい．

```c
/*リスト*/
#include <stdio.h>

int main()
{
    int i = 1, j = 2;
    double x;

    x = i / j;

=======
#include <stdio.h>

int main()
{
    int i = 2, j = 3, k = 5;
    double x;

    x = i / j + j / k + k / i;

>>>>>>> origin/master
    printf("%f\n", x);
}
```

このコードが適切にしなかったのは，整数型の割り算が用いられたことが原因である．整数の割り算は，その結果も整数型となり少数が使えない．そのため，小数点以下の数値は切り捨てとなり適切に割り算を行うことができない．

__課題1.3a__ 次のソースコードを実行した場合に表示される値を予想し答えよ．

__課題1.3b__ 実行した場合に表示される値を報告せよ．

__課題1.3b__ 数値をいろいろ変え，出力される値の規則性を答えよ．たとえば四捨五入になるなど．

次のソースコードを実行し表示される値を報告せよ．

__課題1.3b__ このソースコードを実行すると正しい計算結果が出力される．リスト1とリスト2で結果が異なった理由を考え説明せよ．

### 型変換

計算に応じ変数型を適切に用いないと，正確な計算ができない．四則演算を正しく行うためには，浮動小数を用いる必要がある．初めから変数が浮動小数型であれば四則演算の結果は浮動小数となるが，整数型の変数であれば四則演算の結果は整数となる．しかし，整数型変数ではあるが四則演算は浮動小数としたい場合もあるだろう．その場合，型変換（キャスト）を行う必要がある．キャストを用いた例を次に示す・


```c
#include<stdio.h>
int main(){
    int a = 1;
    int b = 2;

    printf("%f", (double) a / b);

}
```

__課題1.4a__ 次のリストを型変換を利用し計算が正しく行われるよう変更せよ。そして、ソースコードを提出せよ。


```c
#include<stdio.h>
int main(){
    int a = 1;
    float f = 1.2;

    i = f;

    printf("%d", i);

}
```

__課題1.4b__ 次のリストの結果を報告し，その結果を考察せよ．

```c
#include<stdio.h>
int main(){
    int a = 1;
    int b = 2;

    printf("%f", (double) a / b);
    printf("%f", a / (double) b);
    printf("%f", (double) (a / b) );
}
```

### 型変換の応用
前節では正しい型を使わないと正確な計算ができないと説明した。しかし、プログラミングではあえて算数の計算としては不正確な結果を上手く使うことで様々な処理を実現することがある。例えば，小数点以下が必要にない場合はあえて整数型を用い四則演算することで，小数点以下の数を無視することができる．

```c
#include<stdio.h>
int main(){
    int a = 1;
    int b = 2;

    printf("%d", a/b)

}
```

__課題1.5__ 任意の金額を入力し，その金額を500円玉で払うためには何枚必要かを求めるプログラムを作成せよ．
．

## 第2回 フローチャートと条件分岐
### 目的

制御文の一つであるif文を使いこなせるようになることと，フローチャートをかけるようになることを目的とする．

### フローチャートとは

フローチャートとは物事の処理の流れ，特にアルゴリズムを図で表す際に用いられる手法である．世界中で用いられており，日本ではJIS規格により仕様が定められている．フローチャートは特にプログラミングの処理のやり方を記すために使用されるが，その他に仕事の手順などプログラミングとは関係ない場面でも用いられる．そのため，将来プログラミングの仕事をしない場合でも必要となる場面があるのでマスターしたほうがよい．フローチャートは工業以外の多くの場所で使われるため，JIS規格を意識せず書かれることが多いが，本実験ではJIS規格に則ったフローチャートを用いる．

<<<<<<< HEAD
フローチャートは処理の方向を矢印，処理の内容を長方形などの図形を用い処理を表現する．フローチャートで用いられるの最低限の要素（図形）とその意味を図に示す．

![フローチャートで用いる画像](flowchart-parts.png)
=======
```c
if(条件){
	処理1;
}else{
	処理2;
}
```
>>>>>>> origin/master

### 例：絶対値を計算する処理のフローチャート

ここでは，例として絶対値を計算するためのフローチャートの作成を例に，フローチャートの書き方を学ぶ．絶対値とは，数の大きさであり０からどれだけ離れているかを表している．xの絶対値は，xが正の時xで，xが負の時-xである．では，入力した値の絶対値を表示するための手順を次の箇条書きに示すので，処理の手順を確認しよう．

1. 入力値を入れる変数xと絶対値を入れる変数absの宣言をする．
2. 変数ｘに値を入力する．
3. xが正の場合はabsにxの値を入れる．xが負の場合はabsに-xの値を入れる．
4. ｘを表示する．

このように，絶対値を計算するためには主に４つの手順が必要なことが分かる．では次にこの手順を，フローチャートに直したものを見てみよう．



では，この例を参考に課題を解こう．

__課題1__

成績を入力し60以上は単位取得，60未満は不可を表示する処理をフローチャートで表現せよ．

__課題2__ 前問で作ったフローチャートに，入力された値が0より小さい，および100より大きい場合は再入力をさせる機能を追加せよ．


### if文、else文

ここから，プログラミングでよく用いる制御文を学んでいく．制御文とは条件分岐，繰り返し処理のことである．プログラムは制御文の塊である．制御文をマスターすることがプログラミングをマスターすることと言っても過言ではない．この実験を通し制御文をマスターしよう．

まず今回は，条件分岐を学ぶ．C言語において主に用いられる条件分岐はif文，else文である．まず，if文の使い方を次に示す．

```c
<<<<<<< HEAD
if(条件){
	処理;
=======
if (条件式1){
    if (条件式2){     // ここの「if」は一番上の「if」の入れ子
        if (条件式3){   // ここの「if」は一つ上の「if」と一番上の「if」の入れ子
            処理1;
        }
        処理2;
    }
    処理3;
>>>>>>> origin/master
}
```

if文は，まず括弧内の条件を評価し，その条件が真であればif文内の処理を実行する．条件の書き方の例を次に示す．例えばaとbが一緒であるという条件を判定したい場合はa == bと書く．==を使うとaとbが同じ場合，真となり，同じでない場合は偽となる．また、aがb以上であるという条件を判定したい場合はa>=bと書く。初心者は条件判定で用いる記号(演算子)をよく間違えるので、皆も注意してほしい。最も単純でよく起こすミスに、==と書くべきところを=一つしか書かないミスがある。このミスはコンパイルが通ってしまうため発見が難しい。他には、>=と書くべきところを=>と書いてしまうミスがある。これはコンパイルで弾かれるため間違いがある事には気付きやすいが、数式としてはあっているように見えるため探すのに苦労しやすい。


__補足__

ANCI Cでは0は偽と扱われ，それ以外は真と扱われる．他の言語では真偽を取り扱うboolianと呼ばれる型が存在する場合がある．真偽は値としてどのように扱われるかを理解しておかないと，正しく動作しないプログラムになる場合がある．新たな言語を使う場合は必ずチェックしよう．


|比較演算子| 真になる場合 |
|:---:|:-----:|
| x == y | xとyが等しい場合真 |
| x != y | xとyが異なる場合真 |
| x > y | xがyより大きい場合真 |
| x < y | xがyより小さい場合真 |
| x >= y | xがy以上の場合真 |
| x <= y | xがy以下の場合真 |

条件が複数ある場合は

|論理演算子| 真になる場合 |
|:---:|:-----:|
| && | and |
| \|\| | or  |
| ! | not |


```c
if(条件){
	処理1;
}else{
	処理2;
}
```

__課題1__

成績を入力し60以上は単位取得，60未満は不可を表示するプログラムを作成し，プログラムソースを提出せよ．

### 2つの整数の大小関係を表示するプログラム

では，if文の簡単な例として大小比較のプログラムの

### 入れ子（ネスト）構造

先ほどの節では，条件分岐を1回だけ用いた単純なプログラムであった．しかし，実際のプログラムでは複雑な条件分岐を行うことが多々ある．複雑な条件分岐の実装方法の一つとしてネストがある．ネストとは，if文の中にif文を入れる入れ子構造にすることである．

```c
if (条件式1){
    if (条件式2){     // ここの「if」は一番上の「if」の入れ子
        if (条件式3){   // ここの「if」は一つ上の「if」と一番上の「if」の入れ子
            処理1;
        }
        処理2;
    }
    処理3;
}
```

__課題__ 成績判定の作成

試験の点数を入力し、対応する成績を表示するプログラムのためのフローチャートを書き，それに基づきプログラムを作成せよ。
試験は100点満点（0点から100点）とし、点数と成績の対応を以下のようにします。

* ケース1
    * 60 点以上：“合格”
    * 60 点未満：“不合格”
* ケース2
    * 80 点以上：“たいへんよくできました。”
    * 60 点以上、80 点未満：“よくできました。”
    * 60 点未満：“ざんねんでした。”
* ケース3
    * 80 点以上：“優”
    * 70 点以上、80 点未満：“良”
    * 60 点以上、70 点未満：“可”
    * 60 点未満：“不可”


### else if文

__課題__ お釣り計算

## 第3回 繰り返し処理

### 目的

繰り返し処理に用いられるfor文，while文を使いこなせるようになることが目的である．

### 繰り返しfor

繰り返し処理はあらゆるプログラムのなかでif文とならび最も重要処理なものである。繰り返し処理を実現するための命令はいくらか用意されているが、ここでは代表的なfor文を学ぶ。for文は次のように使用される。

```c
for(処理1;条件文;処理2){
	処理3;
}
```

プログラム内でfor文が実行されると、まず処理1が実行される。その次に処理3が実行され，次に条件文が評価され偽ならばfor文が終了する．条件分が真の場合，処理2が実行され，次に処理3が実行される．そして，条件分が評価されfor文の終了判定を行う．これを繰り返す．for文の処理をフローチャートで表したものを図に示す。

### while

```c
while(条件){
	処理
}
```
while文は条件が真である限り処理が実行される。

#### 整数の総和

ループ処理を使い、0からNまでの整数の和を求めてみる。

__課題__ 整数Nの階乗とは1*2*...*(n-1)*nのことである。階乗を計算するプログラムを作成し、ソースコードを提出せよ。

### 多重ループ



__課題1__ 九九表を表示するプログラムを作成せよ。ただし、for文を使うこと。


### 繰り返し処理と条件処理

__課題__  nまでの自然数に対しfizz buzzを行え．Fizz Buzzとは，自然数を1から言っていくが，3の倍数のとき数字の代わりにFizzと言い，5の倍数のとき数字の代わりにBuzzと言い，3と5の倍数のとき数字の代わりにFizzBuzzと言う，ことば遊びである（今回はプログラムで行うので，言うところを表示に読み替える）．


## 第4回 じゃんけんプログラムの作成

### 目的

じゃんけんのプログラムを作成を通し，これまで習ったC言語の知識の復習をする．

### じゃんけんプログラム

じゃんけんとは，２人不完全情報ゲームの一つである．じゃんけんは，２人のプレーヤーがグー，チョキ，パーのいずれかの手を同時に出し，グーとチョキが出た場合はグーを出したプレーヤが，チョキとパーが出た場合はチョキを出したプレーヤが，パーとグーが出た場合はパーを出したプレーヤが勝利するゲームである．

本実験では，このゲームをC言語プログラムで実装する．
このゲームをプログラム上で実現する場合は，プレーヤの手を数値で表現する必要がある．今回は，グー，チョキ，パーそれぞれの0，1．2の数値で表すことにする．
これを踏まえ，作られたじゃんけんプログラムをリストに示す．

```c
<<<<<<< HEAD
#include <stdio.h>

int main()
{
    int my_card = 0;
    int enemy_card = 0;

    scanf("%d", &my_card);
    scanf("%d", &enemy_card);

    if(my_card == enemy_card){
        printf("引き分け\n");
    }else if (my_card == 0 && enemy_card == 1){
        
    }else if (my_card == 1 && enemy_card == 2){
        
    }else if (my_card == 2 && enemy_card == 0){
        
    }else{

    }

    return(0);
}
```

__課題4.1__ このプログラムのフローチャートをかけ．
=======
```

__課題1__ このプログラムのフローチャートをかけ．
>>>>>>> origin/master

__注__ この実験ではじゃんけんの勝敗条件を愚直に記述してあるため，ソースコードが長くなっている，より短く記述することも可能である．余裕が有る場合は，コードを短くする工夫をしてみよう．

### 乱数を使ったじゃんけんプログラム

先ほどのじゃんけんプログラムは，2人のプレイヤーの手を入力する必要があるため，1人で遊べるプログラムにはなっていない．一人で遊べるようにするためには，一人のプレーヤーの手をコンピュータが選ぶように変更する必要がある．コンピュータがプレーヤーの手を決めるときによく用いられるのが乱数である．乱数とは，ある確率に従って生成される数のことである．多くのプログラミングの書籍で乱数と書いてある場合は，すべての数が等しい確率で出現する乱数(一様乱数)のことを示す場合がほとんどである．
<<<<<<< HEAD

乱数を使ったC言語のサンプルプログラムを次に示す．

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
	printf("%d\n", rand()%3);
}
```
=======

乱数を使ったC言語のサンプルプログラムを次に示す．
```c
#include <stdio.h>
#include <stdlib.h>
>>>>>>> origin/master

int main()
{
	printf("%d\n", rand()%3);
}
```
乱数のサンプルプログラムでは，乱数を組み込み関数であるrand()で生成している．rand()は，0からまでの整数のうち1つを返す関数である．それぞれの出現確率は同じ確率である．この関数を使うためには，まずstdlib.hをインクルードする必要がある．

乱数のサンプルプログラムを実行すると，0から2までの数値しか表示されない．これは，rand()関数で生成した整数を3で割った余り(剰余)を表示しているからである．このように，剰余を使えば任意の範囲の整数の乱数を生成できる．

<<<<<<< HEAD
__注__ 組み込み関数のrand()は実は正確な乱数ではなく出て来る数値が決まっており，学術的には使えない場合がある．興味があれば調べてみよう．

__課題4.2__ 先ほど作成したじゃんけんプログラムのplayer2の手を乱数で決め，人間とコンピュータがじゃんけんをするプログラムに書き換えよ．そして，そのプログラムを印刷して提出せよ．
=======
__課題2__ 先ほど作成したじゃんけんプログラムのplayer2の手を乱数で決め，人間とコンピュータがじゃんけんをするプログラムに書き換えよ．そして，そのプログラムを印刷して提出せよ．
>>>>>>> origin/master

### 無限ループとbreak文

次に、3勝したら勝ちになうようじゃんけんプログラムを改造したい。しかし、何回勝負をすれば3勝するかわからないこのように何回ループすれば良いかわからないとき、無限ループを使う場合がある。
無限ループとは，名前の通り無限にループを繰り返す処理のことである．しかし，プログラムは必ず停止しなければならないため，無限ループを抜ける適切な条件分が必ず必要となる．ループを強制的に抜けるための命令が
brake文である．では，次の無限ループとbrake文を使った例を見てみよう．

```c
```

<<<<<<< HEAD
このプログラムは，3回ループが回るとbrake文が実行され，ループをぬけるように作られている．これを参考に次の問題を問いてみよう．

__課題4.3__ 人間がコンピュータに勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__課題4.4__ 人間がコンピュータに3回勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__課題4.5__ 三回勝負を10回行い，人間及びコンピュータの勝率を表示するプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．
=======
__注__ プログラムは必ず停止しなければならない．無限ループは，名前の通り無限にループを繰り返す．brake文を適切に使い必ず終わらす．

__課題3__ 人間がコンピュータに勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．
>>>>>>> origin/master

__課題4__ 人間がコンピュータに3回勝つまでじゃんけんを繰り返すプログラムを作成し，ソースコードを提出せよ．ただし，-1を入力した時は終了するようにせよ．

__注__ サンプルコードと課題のプログラムは，無限ループとbrake文を使わなくても実装できる．余裕がある人は考えてみよう．
