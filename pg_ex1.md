# 情報システム系実験II

### 本実験の目的

本実験を通し，C言語の基礎的なコーディングの仕方とフローチャートを通しプログラミングで必要な論理的な思考を身につけることを目標とする．

### 注意

* 必ず筆記用具，実験書，プログラミング(C言語)の教科書を持ってくること．
* 注意事項は__注__，発展的内容には__発展__と書かれている．
* 発展と書いてある問題は，時間がある場合取り組む．

## 第0回 コーディングに対する全体的な注意

### コーディング

プログラミングは最も重要なのは，読みやすい可読性の高いコードを書くことです．
可読性を高めるために次のようなことを注意してプログラミングしましょう．

* コメントを書く．
* インデントをする．
* マジックナンバーをなくす．
* 変数名，関数名，クラス名などを分かりやすいものにする(命名規則にあわせる)．
* 分かりやすい表現(処理)を使う．
* コードを機能別に関数，クラス，ファイル等に分ける．

### 提出するソースコードの書式

```c
/*
xx番 津山 太朗
課題 1.1
提出日 xxxx年xx月xx日
*/
#include <stdio.h>
int main(void)
{
    return(0);
}
```

__注__ #include <stdio.h>，return(0)は今のところ呪文だと思っておこう．

## 第1回 四則演算と変数の型

### 目的

プログラミングでは扱うデータに種類がある．それぞれの特徴を知らなければ，正確に動作するプログラムは作れない．本課題では，簡単な四則演算と変数の型について理解を深めることを目的とする．

### 変数の種類

変数とは，プログラム内で数値や文字を保存するための入れ物である．変数にはいくつかの種類がある．C言語で扱う変数は大きく整数型，浮動小数型，文字型の3種類である．整数型の変数には整数を，浮動小数型の変数には自然数を，文字型には文字を格納することができる．プログラミングでは，これらの変数型を用途に応じ適切に使い分ける必要がある．初心者である諸君は，まず，整数型int，浮動小数型double，文字型charの3種類を覚えておこう．C言語で用いることができる変数型の一部を表に示す．int，double，char以外にも型があることを知っておこう．

__発展__ char型は整数型でもある．また，int，longなど環境によって使える桁数が変わる変数型がある．符号なし(正の値)の変数も作ることが可能である．その場合は方の前にunsignedと書く．例えば，125から-125まで使える変数型の場合はunsignedの場合0から256までの使える．

| データ型 | データ型の名称  |
|:-------:|:------------:|
|char     | 符号付き8bit整数型|
|short    | 符号付き短整数型|
|int      | 符号付き整数型|
|long int | 符号付き長整数型|
|long long| 符号付き長長整数型|
|float    | 単精度実浮動小数点型|
|double   | 倍精度実浮動小数点型|
|char     | 符号付き文字型|

変数a，b，c，d, eをそれぞれchar型，int型，double型で宣言した例を示す．

```c
 1	/*リスト1.1*/
 2	#include <stdio.h>
 3
 4	int main(void)
 5	{
 6	    /*宣言*/
 7	    char a;
 8	    int b, c;
 9	    double d;
10	    double e = 2.7;
11
12	    /*変数に文字もしくは数を入れる。*/
13	    a = 'X';
14	    b = 10;
15	    c = 100;
16	    d = 1.1;
17
18	    return(0);
19	}
```

変数の宣言は

```c
データ型 変数名;
```

の形式で行う．同じ型の変数を宣言するときは"int b, c;"のように一行に書くことができる(もちろん一つづつ宣言しても良い)．また，変数を宣言すると同時に初期化したい場合も，"double e = 2.7;"のように一行で書くことができる．

変数に値を代入する場合は

```c
変数名  = 値;
```

というように書く．


__注__ /*コメント*/はコメントと呼ばれ，/* */で囲まれた部分は実行されない．そのため，ソースコードの注意事項やメモ，もしくは一時的に無効にしたいコードを/* */の中身に書く．


__課題1.1__ 次の問に答えよ．

1. 文字列を扱う場合，どの型を用いればよいか答えよ．
2. 最も精度が高い(使える桁数が多い)四則演算を行いたい場合，どの型を用いればよいか答えよ．
3. 最も長い桁を表現できる整数型はどれか答えよ．

### printfの表示

C言語では画面にデータを表示する場合，よくprintfが用いられる．printfの使い方は次のとおりである．

```c
printf("文字列と変換指定子", 変数);
```
printf関数は"(ダブルクォーテーション)でくくられた部分が画面に表示する．そして，変数と書かれた部分に表示したい変数を書くと表示される．ただし，変数に対応した変数指定子をダブルクォーテーション内に書く必要がある．ダブルクォーテーション内に書かれた文字列はそのまま表示される．また，変数の部分は省略することができる．次に使用例を示す．

```c
 1	/*リスト1.2*/
 2	#include <stdio.h>
 3
 4	int main(void)
 5	{
 6	    int i = 16;
 7	    double f = 3.14;
 8	    char c1 = 'A';
 9	    char *c2 = "Hello";
10
11	    printf("printfの使い方\n");
12
13	    /*変数の表示*/
14	    printf("整数 %d\n", i);
15	    printf("浮動小数 %f\n", f);
16	    printf("文字 %c\n", c1);
17	    printf("整数 %d\n", c1);
18	    printf("文字列 %s\n", c2);
19	    printf("8進数 %o\n", i);
20	    printf("16進数 %x\n", i);
21
22	    /*変数と変数指定子の型が異なった場合*/
23	    printf("整数 %f\n", i);
24	    printf("浮動小数 %d\n", f);
25
26	    return(0);
27	}
```

__注__ 環境により\(バックスラッシュ)が￥(円マーク)として表示される(扱われる)場合がある．ただし，\と￥を区別する(別の文字として扱われる)環境もあるので注意が必要である．詳しく知りたい人は，円マークと文字コードの関係を調べてみるとよい．

__発展__ C言語ではint main(void)と書く． C++ではint main()でもよい．引数が空の場合の挙動がCとC++では違うため(C++では引数が空の場合void)．

このサンプルを見ると2つほど見慣れない表現が使われている．一つは%を使ったもの，もう一つは\(バックスラッシュ)を用いたものである．%を用いたものは，変数指定子とよばれ，変数の中身を表示するために使われる．例えば，サンプルプログラムで用いられているprintf("整数 %d\n", i)の%dはダブルクォーテーションの外の整数型の変数iの中身を表示するために用いられる．printfで変数の中身を表示するとき，その変数の型に対応した変換指定子を用いないと適切に表示されない．バックスラッシュを用いたものは，エスケープシークエンスと呼ばれるもので，改行やタブなど特殊な文字を表示するために用いられる．

| 変換指定子  | 意味 |
|:-----:|:------------:|
| %c | 1文字出力する|
| %s | 文字列を出力する|
| %d | 整数を10進数で出力する|
| %o | 整数を8進数で出力する|
| %x | 整数を16進数で出力する|
| %f | -dddd.ddddddの形式で出力する|

|   エスケープシーケンス  | 意味 |
|:---:|:----------:|
| \n | 改行を表示する|
| \t | タブを表示する|
| \a | 警報音|

__課題1.2__ リスト1.1を変数a，b，c，d，eを表示するように変更せよ．変更した行のみ報告せよ．


__課題1.3__ サンプルプログラムを実行し，表示結果を答えよ．表示結果のなかで表示された数値が間違っているものを挙げ，なぜに間違った値が表示がされたのか答えよ．

### 四則演算

ここでは，C言語で四則演算を行うための演算子を学ぶ．プログラムで四則演算を行うために用いる文字のことを算術演算子と呼ぶ．主に使う算術演算子を表に示す．加減乗除は，算数でよく使うため諸君は理解できると思うが，剰余算は初めて見るかもしれない．剰余算とは，整数を整数で割った時の余りを計算することである．プログラミングでは剰余算はよく使うので理解しておこう．演算子を用いたサンプルコードをリストに表示する．

|演算子|  意味  |
|:---:|:-----:|
|  +  | 加算   |
|  -  | 減算   |
|  *  | 乗算   |
|  /  | 除算   |
|  %  | 剰余算 |

```c
 1	/*リスト1.3*/
 2	#include<stdio.h>
 3
 4	int main(void)
 5	{
 6	    double x, y, z;
 7	    x = 1;
 8	    y = 2;
 9	    z = x / y;
10
11	    printf("%f\n", z);
12
13	    return(0);
14	}
```

リスト1.3では，1/2=0.5のように我々が習ってきた算数と相違ない結果が表示された．実は，算数と同じ結果が出たのは変数型を適切に用いたからである．次のリスト1.4に，適切に計算出来ないソースコードを示す．課題を行い，理解して欲しい．

```c
 1	/*リスト1.4*/
 2	#include <stdio.h>
 3
 4	int main(void)
 5	{
 6	    int x, y;
 7	    double z;
 8	    x = 1;
 9	    y = 2;
10	    z = x / y;
11
12	    printf("%f\n", z);
13
14	    return(0);
15	}
```

__課題1.4__ 

1. リスト1.4を実行した場合に表示される値を報告せよ．
2. リスト1.3とリスト1.4との違いを報告せよ．
3. リスト1.4のxとyの数値をいろいろ変え，出力される値の規則性を答えよ．たとえば四捨五入になるなど．

### 型変換

計算に応じ変数型を適切に用いないと，正確な計算ができない．四則演算を正しく行うためには，浮動小数を用いる必要がある．初めから変数が浮動小数型であれば四則演算の結果は浮動小数となるが，整数型変数の四則演算の結果は整数となる．そのため，リスト1.4の結果が0.5とならず，小数点以下を切り捨てた整数型の値となった．しかし，整数型変数ではあるが四則演算は浮動小数としたい場合もあるだろう．その場合，型変換（キャスト）を行う必要がある．キャストを用いた例をリスト1.5に示す．リスト1.4と1.5の違いは，x / yの前に(double)が追加されたことだ．(double) x / yは，まず変数xをdouble型に変換する(double) xという計算が実行され，double型に変換されたxをyで割っている．浮動小数と整数の掛け算もしくは割り算の場合，計算の結果は浮動小数になるというC言語の性質を利用している．．


```c
 1	/*リスト1.5*/
 2	#include <stdio.h>
 3
 4	int main(void)
 5	{
 6	    int x, y;
 7	    double z;
 8	    x = 1;
 9	    y = 2;
10	    z = (double) x / y;
11
12	    printf("%f\n", z);
13
14	    return(0);
15	}
```

__課題1.5__ リスト1.6を型変換を利用し計算が正しく行われるよう変更せよ。変更した行のみ報告せよ．

```c
  1	/*リスト1.6*/
 2	#include<stdio.h>
 3
 4	int main(void)
 5	{
 6	    int x = 1;
 7	    int y = 4;
 8	    double z;
 9
10	    z = x/y + 1.5;
11
12	    printf("%f", z);
13
14	    return(0);
15	}
```

__課題1.6__ 次のリストの結果を報告し，その結果を考察せよ．

```c
 1	/*リスト1.7*/
 2	#include<stdio.h>
 3
 4	int main(void)
 5	{
 6	    int a = 1;
 7	    int b = 2;
 8
 9	    printf("%f\n", (double) a / b);
10	    printf("%f\n", a / (double) b);
11	    printf("%f\n", (double) (a / b) );
12
13	    return(0);
14	}
```

### 型変換の応用

前節では正しい型を使わないと正確な計算ができないと説明した。しかし、計算結果に小数点以下が必要にない場合，あえて整数型を用い四則演算する場合がある．リスト1.8に具体例を示す．リスト1.8は任意の金額を500円玉で払うためには何枚必要かを求めるプログラムである．枚数を求める計算は11行目書かれている．11行目の計算を詳しく見てみよう．kingaku/500は整数型同士の割り算なので結果は整数型となる．kingaku=700とあるから700/500=1となる．これでは1枚足りないので，この割り算の結果に1足されている．

```c
 1	/*リスト1.8*/
 2	#include <stdio.h>
 3
 4	int main(void)
 5	{
 6	    int kingaku;
 7	    int maisuu;
 8
 9	    kingaku = 700;
10
11	    maisuu = kingaku/500 + 1;
12
13	    printf("%d円払うためには５００円玉%d枚必要です．", kingaku, maisuu);
14
15	    return(0);
16	}
```

__課題1.7__ リスト1.8を参考に，任意のお釣り（日本円）に対して，紙幣と貨幣の枚数の総和を最も小さくできる払い方を表示させるプログラムを作成せよ．

__課題1.8 (発展)__ 昔のゲームではキャラクタの能力値の上限が255のものがあった．C言語でなるべくメモリを節約しつつ255が上限の変数を使う場合，どの型を用いればよいか．

__課題1.9 (発展)__ 変数で取り扱える数値の範囲は，環境により変わる場合がある．32bit環境と64bit環境では，変数で取り扱える数値の範囲にどのような違いがあるか調べて報告せよ．